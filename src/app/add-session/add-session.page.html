<ion-header mode="md">
    <ion-toolbar class="ion-no-margin">
        <ion-chip slot="start" class="remove-background" (click)="goBackHome({
          dismissed : false
        })">
            <ion-icon class="icon-remove-margin" name="close-outline" color="dark"></ion-icon>
        </ion-chip>
        <ion-title>{{ "createSession.title" | translate }}</ion-title>
        <ion-chip slot="end" class="remove-background " (click)="util.openContest()">
            <ion-icon class="icon-remove-margin" [class.contest]="contest" name="ribbon-outline" color="danger"></ion-icon>
        </ion-chip>
        <ion-badge slot="end" mode="ios" class="contest-badge" color="danger">{{contestBadge}}</ion-badge>
    </ion-toolbar>
</ion-header>

<ion-content>
    <form (ngSubmit)="updateSession()" novalidate>
        <div class="form animate__animated animate__fadeInUp" [formGroup]="sessionAdd">
            <ion-list lines="none">
                <ion-card>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none" class="ion-no-padding">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessionimage" | translate }}</ion-label>
                            <img *ngIf="imageUrl" [src]="imageUrl" />
                            <ion-button (click)="changeImage()">{{ "createSession.selectimage" | translate }}</ion-button>
                        </div>
                    </ion-item>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none" class="ion-no-padding">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessionname" | translate }}</ion-label>
                            <ion-input mode="md" formControlName="sessionname" type="text"></ion-input>
                        </div>
                    </ion-item>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.sessionname.errors?.required">{{ "createSession.sessionameerror" | translate }}</span>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none" class="ion-no-padding">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessionlocation" | translate }}</ion-label>
                            <ion-input mode="md" formControlName="sessionlocation" type="text"></ion-input>
                        </div>
                    </ion-item>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.sessionlocation.errors?.required">{{ "createSession.sessionlocationerror" | translate }}</span>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none" class="ion-no-padding">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessiondescription" | translate }}</ion-label>
                            <ion-textarea rows="5" formControlName="sessiondescription" mode="md" placeholder="{{'createSession.locationplaceholder' | translate }} "></ion-textarea>
                        </div>
                    </ion-item>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.sessiondescription.errors?.required">{{ "createSession.sessiondescriptionerror" | translate }}</span>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none" class="ion-no-padding">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessiontag" | translate }}</ion-label>
                            <ion-input mode="md" formControlName="sessiontag" placeholder="{{'createSession.tagplaceholder' | translate}}" type="text"></ion-input>
                        </div>
                    </ion-item>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.sessiontag.errors?.required">{{ "createSession.sessiontagerror" | translate }}</span>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none" class="ion-no-padding">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessionduration" | translate }}</ion-label>
                            <ion-input mode="md" formControlName="sessionduration" placeholder="{{'createSession.durationplaceholder' | translate}}" type="number"></ion-input>
                        </div>
                    </ion-item>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.sessionduration.errors?.required">{{ "createSession.sessiondurationerror1" | translate }}</span>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.sessionduration.errors?.pattern">{{ "createSession.sessiondurationerror2" | translate }}</span>

                    <ion-item class="animate__animated animate__fadeInUp" lines="none" class="ion-no-padding">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessionseatprice" | translate }}</ion-label>
                            <ion-input mode="md" formControlName="sessionprice" placeholder="{{'createSession.seatpriceplaceholder' | translate}}" type="number"></ion-input>
                        </div>
                    </ion-item>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.sessionprice.errors?.required">{{ "createSession.sessionseatpriceerror1" | translate }}</span>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.sessionprice.errors?.pattern">{{ "createSession.sessionseatpriceerror2" | translate }}</span>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessionlanguage" | translate }}</ion-label>
                            <div class="input_box d-flex">
                                <ion-select formControlName="sessionlang" placeholder="{{'createSession.languageplaceholder' | translate}}" interface="popover">
                                    <ion-select-option value="Arabic">{{ "createSession.lang1" | translate }}</ion-select-option>
                                    <ion-select-option value="English">{{ "createSession.lang2" | translate }}</ion-select-option>
                                </ion-select>
                            </div>
                        </div>
                    </ion-item>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none" class="ion-no-padding">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessionnoseats" | translate }}</ion-label>
                            <ion-input mode="md" formControlName="sessionseats" placeholder="{{ 'createSession.noseatsplaceholder' | translate }}" type="number"></ion-input>
                        </div>
                    </ion-item>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.sessionseats.errors?.required">{{ "createSession.sessionnoseatserror1" | translate }}</span>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.sessionseats.errors?.pattern">{{ "createSession.sessionnoseatserror2" | translate }}</span>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none" class="ion-no-padding">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessionagenda" | translate }}</ion-label>
                            <ion-textarea rows="5" formControlName="sessionagenda" mode="md" placeholder="{{ 'createSession.agendaplaceholder' | translate }} "></ion-textarea>
                        </div>
                    </ion-item>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.sessionagenda.errors?.required">{{ "createSession.sessionagendaerror" | translate }}</span>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessionstartdate" | translate }}</ion-label>
                            <ion-input mode="md" id="startDateInput" type="Date" placeholder="dd/mm/yyyy" (ionChange)="setMinEndDate()" [min]='toDay' formControlName="startdate"></ion-input>
                        </div>
                    </ion-item>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.startdate.errors?.required">{{ "createSession.sessionstartdateerror" | translate }}</span>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessionenddate" | translate }}</ion-label>
                            <ion-input mode="md" type="Date" placeholder="dd/mm/yyyy" [min]='startDateInput' formControlName="enddate"></ion-input>
                        </div>
                    </ion-item>
                    <span class="error-message" *ngIf="isSubmitted && errorControl.enddate.errors?.required">{{ "createSession.sessionenddateerror" | translate }}</span>
                    <ion-item class="animate__animated animate__fadeInUp" lines="none" class="ion-no-padding">
                        <div class="item_inner">
                            <ion-label>{{ "createSession.sessiongooglemap" | translate }}</ion-label>
                            <ion-input mode="md" formControlName="sessionmap" placeholder="{{ 'createSession.googlemapplaceholder' | translate }}" type="url"></ion-input>
                        </div>
                    </ion-item>
                </ion-card>
            </ion-list>
        </div>
        <div class="btn_box">
            <ion-button size="large" [disabled]="isDisablied" type="submit" class="btn animate__animated animate__fadeInUp" style="--animate-duration: .4s;" expand="round">{{ "createSession.sessioncreate" | translate }}</ion-button>
        </div>
    </form>
</ion-content>